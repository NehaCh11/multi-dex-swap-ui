import{__awaiter as e}from"./external/tslib/tslib.es6.js";import{BigNumber as t}from"@ethersproject/bignumber";import{Zero as r,WeiPerEther as o}from"@ethersproject/constants";import{scale as i,bnum as s}from"./utils/bignumber.js";class n{constructor(e,t){this.tokenPriceService=t,this.tokenPriceCache={AddressZero:"1",[e.weth.toLowerCase()]:"1"}}convertGasCostToToken(n,c,a,h=t.from("85000")){return e(this,void 0,void 0,(function*(){if(a.isZero()||h.isZero())return r;const e=yield this.getNativeAssetPriceInToken(n),u=t.from(i(s(e),c).dp(0).toString());return a.mul(h).mul(u).div(o)}))}setNativeAssetPriceInToken(e,t){this.tokenPriceCache[e.toLowerCase()]=t}getNativeAssetPriceInToken(t){return e(this,void 0,void 0,(function*(){const e=this.tokenPriceCache[t.toLowerCase()];if(e)return e;try{const e=yield this.tokenPriceService.getNativeAssetPriceInToken(t);return this.setNativeAssetPriceInToken(t,e),e}catch(e){return console.log("Error Getting Token Price. Defaulting to 0."),console.log(e),"0"}}))}}export{n as SwapCostCalculator};
//# sourceMappingURL=swapCostCalculator.js.map
