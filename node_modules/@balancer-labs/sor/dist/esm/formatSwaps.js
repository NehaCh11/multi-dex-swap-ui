import{BigNumber as t}from"@ethersproject/bignumber";import"./external/lodash.clonedeep/index.js";import{scale as e,bnum as n}from"./utils/bignumber.js";import{EMPTY_SWAPINFO as o}from"./constants.js";import{SwapTypes as r}from"./types.js";import{Zero as a}from"@ethersproject/constants";import{exports as s}from"./_virtual/index.js";const m=t=>[...new Set(t.flatMap((t=>t.flatMap((t=>[t.tokenIn,t.tokenOut])))))],u=t=>[...new Set(t.flatMap((t=>[t.tokenIn,t.tokenOut])))],i=t=>t.reduce(((t,{amount:e})=>t.add(e)),a),p=(t,o,a)=>(t===r.SwapExactOut&&(o=o.reverse()),o.map(((o,s)=>{var m;let u="0";if(0===s){const a=t===r.SwapExactIn?o.tokenInDecimals:o.tokenOutDecimals;u=e(n(o.swapAmount),a).decimalPlaces(0,1).toString()}const i=t===r.SwapExactIn?o.tokenOutDecimals:o.tokenInDecimals,p=e(n(null!==(m=o.returnAmount)&&void 0!==m?m:"0"),i).decimalPlaces(0,1).toString(),l=a.indexOf(o.tokenIn),c=a.indexOf(o.tokenOut);return{poolId:o.pool,assetInIndex:l,assetOutIndex:c,amount:u,userData:"0x",returnAmount:p}})));function l(e,n,r,a,u,l,c,d){if(0===e.length)return s(o);const f=s(e),k=m(f),x=f.flatMap((t=>p(n,t,k))),I=r.sub(i(x));I.gt(0)&&(x[0].amount=t.from(x[0].amount).add(I).toString());return{swapAmount:r,swapAmountForSwaps:r,returnAmount:l,returnAmountFromSwaps:l,returnAmountConsideringFees:c,swaps:x,tokenAddresses:k,tokenIn:a,tokenOut:u,marketSp:d}}export{p as formatSequence,l as formatSwaps,u as getTokenAddressesForSwap};
//# sourceMappingURL=formatSwaps.js.map
