import{formatFixed as e}from"@ethersproject/bignumber";import{bnum as a}from"../../utils/bignumber.js";function t(t,n){if(t.isZero())return t;const r=parseFloat(e(n.swapFee,18)),s=parseFloat(e(n.balanceIn,n.decimalsIn)),o=parseFloat(e(n.balanceOut,n.decimalsOut)),c=i(n.expiryTime,n.currentBlockTimestamp,n.unitSeconds),l=t.toNumber();return a(o-(s**(1-c)-(l+s)**(1-c)+o**(1-c))**(1/(1-c))-Math.abs(l-o+(s**(1-c)-(l+s)**(1-c)+o**(1-c))**(1/(1-c)))*r)}function n(t,n){if(t.isZero())return t;const r=parseFloat(e(n.swapFee,18)),s=parseFloat(e(n.balanceIn,n.decimalsIn)),o=parseFloat(e(n.balanceOut,n.decimalsOut)),c=i(n.expiryTime,n.currentBlockTimestamp,n.unitSeconds),l=t.toNumber();return a(-s+(s**(1-c)+o**(1-c)-(-l+o)**(1-c))**(1/(1-c))+Math.abs(-l-s+(s**(1-c)+o**(1-c)-(-l+o)**(1-c))**(1/(1-c)))*r)}function r(t,n){const r=parseFloat(e(n.swapFee,18)),s=parseFloat(e(n.balanceIn,n.decimalsIn)),o=parseFloat(e(n.balanceOut,n.decimalsOut)),c=i(n.expiryTime,n.currentBlockTimestamp,n.unitSeconds),l=t.toNumber();return a(1/((s**(1-c)-(l+s)**(1-c)+o**(1-c))**(1/(1-c)-1)/(l+s)**c-Math.abs(1-(s**(1-c)-(l+s)**(1-c)+o**(1-c))**(1/(1-c)-1)/(l+s)**c)*r))}function s(t,n){const r=parseFloat(e(n.swapFee,18)),s=parseFloat(e(n.balanceIn,n.decimalsIn)),o=parseFloat(e(n.balanceOut,n.decimalsOut)),c=i(n.expiryTime,n.currentBlockTimestamp,n.unitSeconds),l=t.toNumber();return a((s**(1-c)+o**(1-c)-(-l+o)**(1-c))**(1/(1-c)-1)/(-l+o)**c+Math.abs((s**(1-c)+o**(1-c)-(-l+o)**(1-c))**(1/(1-c)-1)/(-l+o)**c-1)*r)}function o(t,n){const r=parseFloat(e(n.swapFee,18)),s=parseFloat(e(n.balanceIn,n.decimalsIn)),o=parseFloat(e(n.balanceOut,n.decimalsOut)),c=i(n.expiryTime,n.currentBlockTimestamp,n.unitSeconds),l=t.toNumber();return a(-(-((s**(1-c)-(l+s)**(1-c)+o**(1-c))**(1/(1-c)-2))*(1/(1-c)-1)*(1-c)/(l+s)**(2*c)-(l+s)**(-1-c)*(s**(1-c)-(l+s)**(1-c)+o**(1-c))**(1/(1-c)-1)*c-r*Math.abs((s**(1-c)-(l+s)**(1-c)+o**(1-c))**(1/(1-c)-2)*(1/(1-c)-1)*(1-c)/(l+s)**(2*c)+(l+s)**(-1-c)*(s**(1-c)-(l+s)**(1-c)+o**(1-c))**(1/(1-c)-1)*c))/((s**(1-c)-(l+s)**(1-c)+o**(1-c))**(1/(1-c)-1)/(l+s)**c-Math.abs(1-(s**(1-c)-(l+s)**(1-c)+o**(1-c))**(1/(1-c)-1)/(l+s)**c)*r)**2)}function c(t,n){const r=parseFloat(e(n.swapFee,18)),s=parseFloat(e(n.balanceIn,n.decimalsIn)),o=parseFloat(e(n.balanceOut,n.decimalsOut)),c=i(n.expiryTime,n.currentBlockTimestamp,n.unitSeconds),l=t.toNumber();return a((s**(1-c)+o**(1-c)-(-l+o)**(1-c))**(1/(1-c)-2)*(1/(1-c)-1)*(1-c)/(-l+o)**(2*c)+(-l+o)**(-1-c)*(s**(1-c)+o**(1-c)-(-l+o)**(1-c))**(1/(1-c)-1)*c+r*Math.abs((s**(1-c)+o**(1-c)-(-l+o)**(1-c))**(1/(1-c)-2)*(1/(1-c)-1)*(1-c)/(-l+o)**(2*c)+(-l+o)**(-1-c)*(s**(1-c)+o**(1-c)-(-l+o)**(1-c))**(1/(1-c)-1)*c))}function i(e,a,t){let n=a<e?e-a:0;return n/=t,n}export{o as _derivativeSpotPriceAfterSwapExactTokenInForTokenOut,c as _derivativeSpotPriceAfterSwapTokenInForExactTokenOut,t as _exactTokenInForTokenOut,r as _spotPriceAfterSwapExactTokenInForTokenOut,s as _spotPriceAfterSwapTokenInForExactTokenOut,n as _tokenInForExactTokenOut,i as getTimeTillExpiry};
//# sourceMappingURL=elementMath.js.map
