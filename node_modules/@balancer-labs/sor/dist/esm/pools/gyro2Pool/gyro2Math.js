import{BigNumber as n}from"@ethersproject/bignumber";import{WeiPerEther as r}from"@ethersproject/constants";import{divDown as t,mulDown as d,mulUp as o,sqrt as u,divUp as e}from"../gyroHelpers/gyroSignedFixedPoint.js";function s(n,r,o){return[t(n,o),d(n,r)]}function c(n,r,t){const[d,o,u,e]=a(n,r,t);return i(d,o,u,e)}function a(n,u,e){const s=r.sub(t(u,e)),c=t(n[1],e),a=d(n[0],u),i=c.add(a),f=d(n[0],n[1]);let m=d(d(d(n[0],n[0]),u),u);const b=t(d(d(d(n[0],n[1]),r.mul(2)),u),e),E=t(d(n[1],n[1]),o(e,e));return m=m.add(b).add(E),[s,i,m,f]}function i(e,s,c,a){const i=o(e,r.mul(2)),f=d(d(a,r.mul(4)),e),m=c.add(f),b=u(m,n.from(5)),E=s.add(b);return t(E,i)}function f(n,u,e,s,c){const a=n.add(o(s,r.add(2))),i=u.add(d(c,r.sub(1))),f=t(d(i,e),a.add(e));if(f.gt(u))throw new Error("ASSET_BOUNDS_EXCEEDED");return f}function m(n,t,u,s,c){if(u.gt(t))throw new Error("ASSET_BOUNDS_EXCEEDED");const a=n.add(o(s,r.add(2))),i=t.add(d(c,r.sub(1)));return e(o(a,u),i.sub(u))}function b(n,o,u,e,s,c){const a=r.sub(c),i=n[0].add(e).add(d(a,o)),f=n[1].add(s),m=d(a,f.sub(u));return t(i,m)}function E(d,o,u){const e=n.from(2).mul(r),s=d[1].add(u).sub(o);return t(e,s)}function l(o,u,e,s,c,a){const i=n.from(2).mul(r),f=r.sub(a),m=o[0].add(s).add(d(f,u)),b=o[1].add(c),E=d(b.sub(e),b.sub(e)),l=t(i,f);return d(l,t(m,E))}function p(n,r){return n[1].add(r).div(2)}export{m as _calcInGivenOut,f as _calcOutGivenIn,c as _calculateInvariant,b as _calculateNewSpotPrice,i as _calculateQuadratic,a as _calculateQuadraticTerms,E as _derivativeSpotPriceAfterSwapExactTokenInForTokenOut,l as _derivativeSpotPriceAfterSwapTokenInForExactTokenOut,s as _findVirtualParams,p as _getNormalizedLiquidity};
//# sourceMappingURL=gyro2Math.js.map
