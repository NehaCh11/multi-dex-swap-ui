"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Optimism = void 0;
const contracts_evm_1 = require("@hashflow/contracts-evm");
const ethers_1 = require("ethers");
const optimism_1 = require("../../../contracts/optimism");
const OVM_GAS_ORACLE_ADDRESS = '0x420000000000000000000000000000000000000F';
class Optimism {
    constructor(contracts) {
        this.contracts = contracts;
    }
    async estimateOptimismL1GasFee(transaction) {
        if (this.contracts.networkId !== contracts_evm_1.OPTIMISM.chainId) {
            throw new Error('Optimism is required for this estimation.');
        }
        const serializedUnsignedTransaction = ethers_1.Transaction.from(transaction).unsignedSerialized;
        const gasOracle = optimism_1.IGasOracle__factory.connect(OVM_GAS_ORACLE_ADDRESS, this.contracts.signerOrProvider);
        const l1GasCost = await gasOracle.getL1Fee(serializedUnsignedTransaction);
        return l1GasCost;
    }
}
exports.Optimism = Optimism;
//# sourceMappingURL=Optimism.js.map